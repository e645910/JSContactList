<!DOCTYPE html>
<html>
<head>

</head><link rel="stylesheet" type="text/css" href="fullsort.css">


<div id="results">

</div>
<body>
	<div id="d1"></div>
	<div id="d2"></div>
	<div id="d3"></div>
	<div id="d4"></div>
	<div id="d5"></div>
	<div id="d6"></div>
	<div id="d7"></div>
	<div id="d8"></div>
	<div id="d9"></div>
	<div id="d10"></div>


<script>

document.getElementById("results").innerHTML = window.localStorage;
console.log(window.localStorage)
// window.localStorage.clear();


var homes 
= [{"id":10,"company":"Fred Flintstone Inc","address1":"1 Hard Rock Bl","address2":"34 Sandy Path Rd","city":"BedRock","state":"TX","zip":"567834","notes":"Makes hard rock candy","fullName":"Fred Flintstone","dept":"Exective","phone":"(555)-345-456","email":"freddy.boy@s.com"},{"id":5,"company":"Davis Ray Co","address1":"567 E. 789 N.","address2":"931 n 890 e","city":"Orem","state":"Utah","zip":"84097","notes":"Easy peasy. Except when you try something like this ","fullName":"Fred Happy","dept":"HR","phone":"567-123-6789","email":"r.w@q.com"},{"id":6,"company":"winter co","address1":"123 Riddle lane","address2":"999 lost boy st","city":"Orem","state":"Utah","zip":"84097","notes":"This is a test!","fullName":"Joe DeSpain","dept":"IT","phone":"342-867-2345","email":"j@q.com"},{"id":8,"company":"AbC Gum Store","address1":"1 well heeled bl","address2":"5769 been there st","city":"Zebra","state":"Arizona","zip":"85739","notes":"Happy go lucky person","fullName":"John Doe","dept":"Shipping","phone":"9582671234","email":"t.j@w.com"},{"id":9,"company":"Ben Hur Chariots","address1":"759 Hello Dolly ln","address2":"","city":"Kodiak","state":"AK","zip":"99751","notes":"Small fishing community","fullName":"Joe Fisherman","dept":"Sports","phone":"(907) 887-9883","email":"kodiak@q.com"}];


// var Contacts 
// = ["Contacts:"1{"id":10,"company":"Fred Flintstone Inc","address1":"1 Hard Rock Bl","address2":"34 Sandy Path Rd","city":"BedRock","state":"TX","zip":"567834","notes":"Makes hard rock candy","fullName":"Fred Flintstone","dept":"Exective","phone":"(555)-345-456","email":"freddy.boy@s.com"},{"id":5,"company":"Davis Ray Co","address1":"567 E. 789 N.","address2":"931 n 890 e","city":"Orem","state":"Utah","zip":"84097","notes":"Easy peasy. Except when you try something like this ","fullName":"Fred Happy","dept":"HR","phone":"567-123-6789","email":"r.w@q.com"},{"id":6,"company":"winter co","address1":"123 Riddle lane","address2":"999 lost boy st","city":"Orem","state":"Utah","zip":"84097","notes":"This is a test!","fullName":"Joe DeSpain","dept":"IT","phone":"342-867-2345","email":"j@q.com"},{"id":8,"company":"AbC Gum Store","address1":"1 well heeled bl","address2":"5769 been there st","city":"Zebra","state":"Arizona","zip":"85739","notes":"Happy go lucky person","fullName":"John Doe","dept":"Shipping","phone":"9582671234","email":"t.j@w.com"},{"id":9,"company":"Ben Hur Chariots","address1":"759 Hello Dolly ln","address2":"","city":"Kodiak","state":"AK","zip":"99751","notes":"Small fishing community","fullName":"Joe Fisherman","dept":"Sports","phone":"(907) 887-9883","email":"kodiak@q.com"}];


// //Put the object into storage
// localStorage.setItem('Contacts', JSON.stringify(Contacts));

// // Retrieve the object from storage
// var retrievedObject = localStorage.getItem('Contacts');

// console.log('retrievedObject: ', JSON.parse(retrievedObject));


var sortOn = function (arr, prop, reverse, numeric) {

    // Ensure there's a property
    if (!prop || !arr) {
        return arr
    }

    // Set up sort function
    var sort_by = function (field, rev, primer) {

        // Return the required a,b function
        return function (a, b) {

            // Reset a, b to the field
            a = primer(a[field]), b = primer(b[field]);

            // Do actual sorting, reverse as needed
            return ((a < b) ? -1 : ((a > b) ? 1 : 0)) * (rev ? -1 : 1);
        }

    }

    // Distinguish between numeric and string to prevent 100's from coming before smaller
    // e.g.
    // 1
    // 20
    // 3
    // 4000
    // 50

    if (numeric) {

        // Do sort "in place" with sort_by function
        arr.sort(sort_by(prop, reverse, function (a) {

            // - Force value to a string.
            // - Replace any non numeric characters.
            // - Parse as float to allow 0.02 values.
            return parseFloat(String(a).replace(/[^0-9.-]+/g, ''));

        }));
    } else {

        // Do sort "in place" with sort_by function
        arr.sort(sort_by(prop, reverse, function (a) {

            // - Force value to string.
            return String(a).toUpperCase();

        }));
    }


}

function stringResult(elemID, doing, label) {
    var elem = document.getElementById(elemID);
    var result = "<p>" + label + "</p>";   
    result += '<table cellpadding="10" cellspacing="5">';
    
    for (var i = 0; i < homes.length; i++) {
        result += "<tr>";
        result += '<td class="' + (doing == "id" ? "hot" : "cold") + '">';
        result += homes[i].id + "</td>";
        
        result += '<td class="' + (doing == "city" ? "hot" : "cold") + '">';
        result += homes[i].city + "</td>";
        
        result += '<td class="' + (doing == "state" ? "hot" : "cold") + '">';
        result += homes[i].state + "</td>";
        
        result += '<td class="' + (doing == "zip" ? "hot" : "cold") + '">';
        result += homes[i].zip + "</td>";
        
        result += '<td class="' + (doing == "address1" ? "hot" : "cold") + '">';
        result += homes[i].address1 + "</td>";
        result += "</tr>";
    }
    result += "</table>";
    result += "<br/>";   
    elem.innerHTML += result;
    
}

// Sort ID
sortOn(homes, 'id', false, true);
stringResult("d1", 'id', "ID numeric");

sortOn(homes, 'id', true, true);
stringResult("d2", 'id', "ID reverse numeric");


// Sort CITY
sortOn(homes, 'city', false, false);
stringResult("d3", 'city', "CITY");

sortOn(homes, 'city', true, false);
stringResult("d4", 'city', "CITY reverse");


// Sort STATE
sortOn(homes, 'state', false, false);
stringResult("d5", 'state', "STATE");

sortOn(homes, 'state', true, false);
stringResult("d6", 'state', "STATE reverse");


// Sort ZIP
sortOn(homes, 'zip', false, true);
stringResult("d7", 'zip', "ZIP numeric");

sortOn(homes, 'zip', true, true);
stringResult("d8", 'zip', "ZIP reverse numeric");


// Sort PRICE
sortOn(homes, 'address1', false, true);
stringResult("d9", 'address1', "address1 numeric");

sortOn(homes, 'address1', true, true);
stringResult("d10", 'address1', "PRICE reverse numeric");
</script>
</body>
</html>