<!DOCTYPE html>
<html>
<head>

</head><link rel="stylesheet" type="text/css" href="fullsort.css">
<body>
	<div id="d1"></div>
	<div id="d2"></div>
	<div id="d3"></div>
	<div id="d4"></div>
	<div id="d5"></div>
	<div id="d6"></div>
	<div id="d7"></div>
	<div id="d8"></div>
	<div id="d9"></div>
	<div id="d10"></div>


<script>

var homes = [{
    "id": "3",
    "city": "Dallas",
    "state": "TX",
    "zip": "75201",
    "price": "$430,876.99"
}, {
    "id": "4",
    "city": "Bevery Hills",
    "state": "CA",
    "zip": "90210",
    "price": "$1,120,256.00"
}, {
    "id": "5",
    "city": "New York",
    "state": "NY",
    "zip": "00010",
    "price": "700256.00"
}];

var sortOn = function (arr, prop, reverse, numeric) {

    // Ensure there's a property
    if (!prop || !arr) {
        return arr
    }

    // Set up sort function
    var sort_by = function (field, rev, primer) {

        // Return the required a,b function
        return function (a, b) {

            // Reset a, b to the field
            a = primer(a[field]), b = primer(b[field]);

            // Do actual sorting, reverse as needed
            return ((a < b) ? -1 : ((a > b) ? 1 : 0)) * (rev ? -1 : 1);
        }

    }

    // Distinguish between numeric and string to prevent 100's from coming before smaller
    // e.g.
    // 1
    // 20
    // 3
    // 4000
    // 50

    if (numeric) {

        // Do sort "in place" with sort_by function
        arr.sort(sort_by(prop, reverse, function (a) {

            // - Force value to a string.
            // - Replace any non numeric characters.
            // - Parse as float to allow 0.02 values.
            return parseFloat(String(a).replace(/[^0-9.-]+/g, ''));

        }));
    } else {

        // Do sort "in place" with sort_by function
        arr.sort(sort_by(prop, reverse, function (a) {

            // - Force value to string.
            return String(a).toUpperCase();

        }));
    }


}

function stringResult(elemID, doing, label) {
    var elem = document.getElementById(elemID);
    var result = "<p>" + label + "</p>";   
    result += '<table cellpadding="10" cellspacing="5">';
    
    for (var i = 0; i < homes.length; i++) {
        result += "<tr>";
        result += '<td class="' + (doing == "id" ? "hot" : "cold") + '">';
        result += homes[i].id + "</td>";
        
        result += '<td class="' + (doing == "city" ? "hot" : "cold") + '">';
        result += homes[i].city + "</td>";
        
        result += '<td class="' + (doing == "state" ? "hot" : "cold") + '">';
        result += homes[i].state + "</td>";
        
        result += '<td class="' + (doing == "zip" ? "hot" : "cold") + '">';
        result += homes[i].zip + "</td>";
        
        result += '<td class="' + (doing == "price" ? "hot" : "cold") + '">';
        result += homes[i].price + "</td>";
        result += "</tr>";
    }
    result += "</table>";
    result += "<br/>";   
    elem.innerHTML += result;
    
    
}

// Sort ID
sortOn(homes, 'id', false, true);
stringResult("d1", 'id', "ID numeric");

sortOn(homes, 'id', true, true);
stringResult("d2", 'id', "ID reverse numeric");


// Sort CITY
sortOn(homes, 'city', false, false);
stringResult("d3", 'city', "CITY");

sortOn(homes, 'city', true, false);
stringResult("d4", 'city', "CITY reverse");


// Sort STATE
sortOn(homes, 'state', false, false);
stringResult("d5", 'state', "STATE");

sortOn(homes, 'state', true, false);
stringResult("d6", 'state', "STATE reverse");


// Sort ZIP
sortOn(homes, 'zip', false, true);
stringResult("d7", 'zip', "ZIP numeric");

sortOn(homes, 'zip', true, true);
stringResult("d8", 'zip', "ZIP reverse numeric");


// Sort PRICE
sortOn(homes, 'price', false, true);
stringResult("d9", 'price', "PRICE numeric");

sortOn(homes, 'price', true, true);
stringResult("d10", 'price', "PRICE reverse numeric");
</script>
</body>
</html>